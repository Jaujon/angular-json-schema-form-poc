<div [formGroup]="form">
  <ng-container [ngSwitch]="question.controlType">

    <mat-form-field *ngSwitchCase="'textbox'">
      <input matInput
             [placeholder]="question.label"
             [type]="question.type"
             [formControl]="form.get(question.key)">
      <mat-error *ngIf="form.get(question.key).errors && form.get(question.key).errors.required">Name is required</mat-error>
    </mat-form-field>

    <mat-form-field *ngSwitchCase="'dropdown'">
      <mat-select [placeholder]="question.label" [formControl]="form.get(question.key)">
        <mat-option *ngFor="let option of question.options" [value]="option.key">
          {{option.value}}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <fieldset *ngSwitchCase="'fieldset'" [formGroupName]="question.key" [id]="question.key">
      <legend>{{ question.label }}</legend>
      <app-question *ngFor="let subQuestion of question.collection" [question]="subQuestion" [form]="form.get(question.key)"></app-question>
    </fieldset>

  </ng-container>

</div>


<!--
Copyright 2017 Google Inc. All Rights Reserved.
Use of this source code is governed by an MIT-style license that
can be found in the LICENSE file at http://angular.io/license
-->
